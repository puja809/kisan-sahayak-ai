# User Service Configuration
# All configuration is managed through this file

# Database Configuration (MySQL - shared instance with table prefix isolation)
database:
  host: "localhost"
  port: 3306
  username: "root"
  password: "password"
  name: "indian_farmer_db"
  table_prefix: "sess_c05a946fe_"
  pool:
    maximum_size: 10
    minimum_idle: 5
    connection_timeout: 30000
    idle_timeout: 600000
    max_lifetime: 1800000

# Redis Configuration (key prefix isolation)
redis:
  host: "localhost"
  port: 6379
  password: ""
  key_prefix: "sess:c05a946fe:"
  session:
    ttl: 86400  # 24 hours in seconds

# Application Configuration
app:
  host: "0.0.0.0"
  port: 8081
  name: "user-service"

# JWT Configuration
jwt:
  secret: "indian-farmer-assistance-app-jwt-secret-key-must-be-at-least-256-bits-long"
  expiration: 86400000  # 24 hours in milliseconds
  refresh_expiration: 604800000  # 7 days in milliseconds
  issuer: "indian-farmer-assistance"

# AgriStack UFSI Configuration
agristack:
  base_url: "https://api.agristack.gov.in"
  ufsi:
    endpoint: "/ufsi/v1"
    timeout: 30000  # 30 seconds
    retry:
      max_attempts: 3
      backoff_multiplier: 2
      initial_delay: 1000  # 1 second
  farmer_registry:
    endpoint: "/farmer-registry/v1"
  geo_map_registry:
    endpoint: "/geo-map-registry/v1"
  crop_sown_registry:
    endpoint: "/crop-sown-registry/v1"
  api_key: "${AGRISTACK_API_KEY:}"

# Security Configuration
security:
  password:
    algorithm: "BCrypt"
    work_factor: 12
  cors:
    allowed_origins:
      - "http://localhost:4200"
      - "http://localhost:3000"
    allowed_methods:
      - "GET"
      - "POST"
      - "PUT"
      - "DELETE"
      - "OPTIONS"
    allowed_headers:
      - "*"
    max_age: 3600

# Logging Configuration
logging:
  level:
    root: "INFO"
    com.farmer: "DEBUG"
    org.springframework.security: "DEBUG"
  pattern: "%d{yyyy-MM-dd HH:mm:ss} [%thread] %-5level %logger{36} - %msg%n"

# Actuator Configuration
management:
  endpoints:
    web:
      exposure:
        include: "health,info,metrics"
  endpoint:
    health:
      show_details: "when_authorized"